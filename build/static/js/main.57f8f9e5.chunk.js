(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{2:function(t,e){t.exports={ALL_MATCHS:{title:"All matchs",path:"/all_matchs"},OPEN_MATCHS:{title:"Open matchs",path:"/open_matchs"},MY_MATCHS:{title:"My matchs",path:"/my_matchs"},CREATE_MATCH:{title:"Create match",path:"/create_match"},CONFIG:{title:"Config",path:"/config"}}},72:function(t,e,a){},73:function(t,e,a){},74:function(t,e,a){"use strict";a.r(e);var n=a(1),c=a(35),r=a.n(c),i=a(3),s=a.n(i),o=a(6),l=a(12),u=a(10),h=a(4),d=a(14),j=a.n(d),p={logIn_signUp:function(t){return j.a.post("".concat("https://gutematch.herokuapp.com","/api/config"),t).then((function(t){return t.data}))}},m=a(13),b=a(2),f=a.n(b),O=a(0),x=a(33),v=a(66),M=a(67);x.extend(v),x.extend(M);var g=function(t){var e,a,n=t.path,c=t.user,r=t.match,i=t.joinMatch,s=t.leaveMatch,o=t.deleteMatch,l=r.name,u=r.date,h=r.location,d=r.players,j=r.players_field,p=r.id_admin;return e=n===f.a.OPEN_MATCHS.path?Object(O.jsx)("button",{onClick:i,children:"Join"}):n===f.a.MY_MATCHS.path?Object(O.jsx)("button",{onClick:s,children:"Leave"}):void 0,p===Number(c)&&(a=Object(O.jsx)("button",{onClick:o,children:"Del"})),Object(O.jsxs)("div",{id:"".concat(n),className:"match-container",children:[Object(O.jsxs)("div",{className:"date",children:[Object(O.jsx)("div",{className:"day",children:x(u).utc().format("DD \u2014 dddd")}),Object(O.jsx)("div",{className:"month-year",children:x(u).utc().format(", MMMM. YYYY")})]}),Object(O.jsxs)("div",{className:"match",children:[Object(O.jsx)("div",{className:"time",children:x(u).utc().format("HH:mm")}),Object(O.jsxs)("div",{className:"players",children:[Object(O.jsxs)("div",{className:"field",children:["F",j/2]}),Object(O.jsx)("div",{className:"joined",children:d}),Object(O.jsx)("div",{className:"missed",children:"/ ".concat(j)})]}),Object(O.jsxs)("div",{className:"action-match",children:[a," ",e]})]}),Object(O.jsxs)("div",{className:"info",children:[Object(O.jsx)("div",{className:"name",children:l}),Object(O.jsx)("div",{className:"location",children:h})]})]})},N="https://gutematch.herokuapp.com",_={getAllMatchs:function(){return j.a.get("".concat(N,"/api/all_matchs")).then((function(t){return t.data}))},getOpenMatchs:function(t){return j.a.get("".concat(N,"/api/open_matchs/").concat(t)).then((function(t){return t.data}))},getMyMatchs:function(t){return j.a.get("".concat(N,"/api/my_matchs/").concat(t)).then((function(t){return t.data}))},createMatch:function(t,e){return j.a.post("".concat(N,"/api/create_match/").concat(e),t).then((function(t){return t.data}))},deleteMatch:function(t,e){var a={id_match:t};return j.a.delete("".concat(N,"/api/my_matchs/owner/").concat(e),{data:a}).then((function(t){return t.data}))},joinMatch:function(t,e){var a={id_match:t};return j.a.post("".concat(N,"/api/open_matchs/").concat(e),a).then((function(t){return t.data}))},leaveMatch:function(t,e){var a={id_match:t};return j.a.delete("".concat(N,"/api/my_matchs/").concat(e),{data:a}).then((function(t){return t.data}))}};var C=function(t){var e=t.props,a=Object(h.f)(),c=a.location.pathname,r=function(){return a.push(f.a.MY_MATCHS.path)},i=Object(n.useState)([]),u=Object(l.a)(i,2),d=u[0],j=u[1],p=Object(n.useState)(""),m=Object(l.a)(p,2),b=m[0],x=m[1],v=Object(n.useState)(!1),M=Object(l.a)(v,2),N=M[0],C=M[1];Object(n.useEffect)((function(){if(c===f.a.ALL_MATCHS.path)x(f.a.ALL_MATCHS.title),function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getAllMatchs().then((function(t){j(t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()();else if(c===f.a.OPEN_MATCHS.path){x(f.a.OPEN_MATCHS.title),function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e){t.next=5;break}return t.next=3,_.getOpenMatchs(e).then((function(t){j("object"===typeof t?t:[])}));case 3:t.next=5;break;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}else if(c===f.a.MY_MATCHS.path){x(f.a.MY_MATCHS.title),function(){var t=Object(o.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e){t.next=5;break}return t.next=3,_.getMyMatchs(e).then((function(t){j("object"===typeof t?t:[])}));case 3:t.next=6;break;case 5:j([]);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}}),[e,c,N]);var y=function(){var t=Object(o.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.joinMatch(a,e).then(function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C(!N),r();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Object(o.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.leaveMatch(a,e).then(function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C(!N),r();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=Object(o.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.deleteMatch(a,e).then(function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C(!N),r();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{id:"match-page",children:[Object(O.jsx)("div",{className:"title-container",children:b}),d.map((function(t,a){return Object(O.jsx)(g,{match:t,user:e,path:c,joinMatch:function(){return y(t.id_match)},leaveMatch:function(){return A(t.id_match)},deleteMatch:function(){return w(t.id_match)}},a)})),Object(O.jsx)("div",{className:"bottom-space"})]})},y=a(19),A=a(18),w=a(33);var S=function(t){var e=t.props,a=Object(n.useState)({date:w().format("YYYY-MM-DD"),time:"20:00",location:"",players_field:10,name:""}),c=Object(l.a)(a,2),r=c[0],i=c[1],u=function(t){i(Object(A.a)(Object(A.a)({},r),{},Object(y.a)({},t.target.name,t.target.value)))},d=Object(h.f)(),j=f.a.CREATE_MATCH.title,p=function(){var t=Object(o.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),0===e){t.next=7;break}return n={date:"".concat(r.date," ").concat(r.time),location:r.location,players_field:Number(r.players_field),name:r.name},t.next=5,_.createMatch(n,e).then(function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"Match created"===e&&d.push(f.a.MY_MATCHS.path);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:t.next=7;break;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{id:"match-form",children:[Object(O.jsx)("div",{className:"title-container",children:j}),Object(O.jsxs)("form",{onSubmit:p,onReset:function(){i(Object(A.a)(Object(A.a)({},r),{},{date:"",time:"",location:"",players_field:10,name:""}))},className:"create-match-form",children:[Object(O.jsx)("div",{id:"location-field",children:Object(O.jsxs)("fieldset",{children:[Object(O.jsx)("legend",{children:"Location"}),Object(O.jsx)("input",{className:"input-adress",required:!0,placeholder:"Adress",name:"location",value:r.location,onChange:u}),Object(O.jsx)("label",{children:"Adress 1234, City, Country"})]})}),Object(O.jsxs)("div",{className:"name-field",children:[Object(O.jsxs)("fieldset",{children:[Object(O.jsx)("legend",{children:"Field"}),Object(O.jsxs)("select",{className:"drop-players-field",name:"players_field",type:"number",value:r.players_field,onChange:u,children:[Object(O.jsx)("option",{value:"10",children:"F \u2014 5"}),Object(O.jsx)("option",{value:"14",children:"F \u2014 7"}),Object(O.jsx)("option",{value:"18",children:"F \u2014 9"}),Object(O.jsx)("option",{value:"22",children:"F \u2014 11"})]})]}),Object(O.jsxs)("fieldset",{children:[Object(O.jsx)("legend",{children:"Name"}),Object(O.jsx)("input",{className:"input-name",required:!0,placeholder:"Match name",maxLength:"10",name:"name",value:r.name,onChange:u})]})]}),Object(O.jsxs)("div",{className:"date-field",children:[Object(O.jsxs)("fieldset",{children:[Object(O.jsx)("legend",{children:"Date"}),Object(O.jsx)("input",{required:!0,className:"input-date",type:"date",name:"date",min:w().format("YYYY-MM-DD"),max:w().add(3,"M").format("YYYY-MM-DD"),value:r.date,onChange:u})]}),Object(O.jsxs)("fieldset",{children:[Object(O.jsx)("legend",{children:"Time"}),Object(O.jsx)("input",{required:!0,className:"input-time",type:"time",name:"time",value:r.time,onChange:u})]})]}),Object(O.jsxs)("div",{className:"action-match-form",children:[Object(O.jsx)("button",{type:"reset",value:"Reset",children:"Reset"}),Object(O.jsx)("button",{type:"submit",children:"Create"})]})]})]})},T=function(t){var e=t.msg;if(e){var a=e;return Object(O.jsx)("div",{className:"message",children:Object(O.jsx)("div",{children:a})})}return null},k=function(){var t=Object(m.b)().loginWithRedirect;return Object(O.jsx)("button",{className:"action-button primary",onClick:function(){return t()},children:"Log In"})},H=function(){var t=Object(m.b)().logout;return Object(O.jsx)("button",{className:"action-button logout-button secondary",onClick:function(){return localStorage.removeItem("player_id"),localStorage.removeItem("player_name"),void t({returnTo:window.location.origin})},children:"Log Out"})},I=function(){var t=Object(m.b)().isAuthenticated;return localStorage.getItem("player_id")||t?Object(O.jsx)(H,{}):Object(O.jsx)(k,{})},Y=function(t){var e=t.playerName,a=f.a.CONFIG.title,n=function(){return e?Object(O.jsx)("div",{children:e}):null};return Object(O.jsxs)("div",{className:"config",children:[Object(O.jsx)("div",{className:"title-container",children:a}),Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(n,{}),Object(O.jsx)(I,{})]})]})},E={settingsIcon:a.p+"static/media/settings.5ce75b92.svg",openMatchsIcon:a.p+"static/media/open_matchs.da3387c7.svg",myMatchsIcon:a.p+"static/media/my_matchs.feae84d8.svg",createMatchIcon:a.p+"static/media/create.62809c1e.svg"};a(72),a(73);var L=function(){var t=localStorage.getItem("player_id"),e=localStorage.getItem("player_name"),a=Object(m.b)().user,c=Object(n.useState)(Number(t)||0),r=Object(l.a)(c,2),i=r[0],d=r[1];Object(n.useEffect)((function(){if(a){var t={sub:a.sub,name:a.name};p.logIn_signUp(t).then(function(){var t=Object(o.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=d,t.next=3,e[0].id;case 3:return t.t1=t.sent,(0,t.t0)(t.t1),t.t2=localStorage,t.next=8,e[0].id;case 8:return t.t3=t.sent,t.t2.setItem.call(t.t2,"player_id",t.t3),t.t4=localStorage,t.next=13,e[0].name;case 13:t.t5=t.sent,t.t4.setItem.call(t.t4,"player_name",t.t5);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}),[a,i]);var j=Object(n.useState)(""),b=Object(l.a)(j,2),x=b[0],v=b[1],M=Object(n.useState)(),g=Object(l.a)(M,2),N=g[0],_=g[1],y=Object(n.useState)(!1),A=Object(l.a)(y,2),w=A[0],k=A[1];return Object(n.useEffect)((function(){_(window.location.pathname)}),[w]),Object(O.jsx)(u.a,{children:Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)("div",{className:"fixed-background"}),Object(O.jsxs)("div",{className:"header",children:[Object(O.jsxs)("div",{className:"topbar-container",children:[Object(O.jsxs)("div",{className:"logo",children:["gute",Object(O.jsx)("span",{children:"match"})]}),Object(O.jsx)(u.b,{to:f.a.CONFIG.path,onClick:function(){return k(!w)},className:"".concat(N===f.a.CONFIG.path?"display-none":"config-button"),children:Object(O.jsx)("img",{src:E.settingsIcon,alt:"settings",className:"settings-icon",width:"20",height:"20"})})]}),Object(O.jsx)("div",{className:"message-container",children:Object(O.jsx)(T,{msg:x,action:void(x&&setTimeout((function(){v("")}),8e3))})})]}),Object(O.jsx)("div",{className:"main",children:Object(O.jsxs)(h.c,{children:[Object(O.jsx)(h.a,{exact:!0,path:"/",children:Object(O.jsx)(C,{props:i})}),Object(O.jsx)(h.a,{path:f.a.ALL_MATCHS.path,children:Object(O.jsx)(C,{props:i})}),Object(O.jsx)(h.a,{path:f.a.OPEN_MATCHS.path,children:Object(O.jsx)(C,{props:i})}),Object(O.jsx)(h.a,{path:f.a.MY_MATCHS.path,children:Object(O.jsx)(C,{props:i})}),Object(O.jsx)(h.a,{path:f.a.CREATE_MATCH.path,children:Object(O.jsx)(S,{props:i})}),Object(O.jsx)(h.a,{path:f.a.CONFIG.path,children:Object(O.jsx)(Y,{playerName:e})})]})}),Object(O.jsxs)("div",{className:"navbar",children:[0!==i?Object(O.jsx)(u.b,{to:f.a.OPEN_MATCHS.path,onClick:function(){return k(!w)},children:Object(O.jsx)("img",{src:E.openMatchsIcon,alt:"Open Matchs",className:"".concat(N===f.a.OPEN_MATCHS.path?"focus":"nav-icon"),width:"20",height:"20"})}):Object(O.jsx)(u.b,{to:f.a.ALL_MATCHS.path,onClick:function(){return k(!w)},children:Object(O.jsx)("img",{src:E.openMatchsIcon,alt:"All Matchs",className:"".concat(N===f.a.ALL_MATCHS.path?"focus":"nav-icon"),width:"20",height:"20"})}),Object(O.jsx)(u.b,{to:f.a.CREATE_MATCH.path,onClick:function(){return k(!w)},children:Object(O.jsx)("img",{src:E.createMatchIcon,alt:"Create Match",className:"".concat(N===f.a.CREATE_MATCH.path?"focus":"nav-icon"),width:"20",height:"20"})}),Object(O.jsx)(u.b,{to:f.a.MY_MATCHS.path,onClick:function(){return k(!w)},children:Object(O.jsx)("img",{src:E.myMatchsIcon,alt:"My Matchs",className:"".concat(N===f.a.MY_MATCHS.path?"focus":"nav-icon"),width:"20",height:"20"})})]})]})})},D=function(t){var e=t.children,a=Object(h.f)();return Object(O.jsx)(m.a,{domain:"guten.us.auth0.com",clientId:"9KgqHeGFIRxSvwUD75TAWC573AHlg9WK",redirectUri:window.location.origin,onRedirectCallback:function(t){a.push((null===t||void 0===t?void 0:t.returnTo)||window.location.pathname)},children:e})};r.a.render(Object(O.jsx)(u.a,{children:Object(O.jsx)(D,{children:Object(O.jsx)(L,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.57f8f9e5.chunk.js.map