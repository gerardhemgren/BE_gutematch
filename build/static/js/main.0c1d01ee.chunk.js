(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{67:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n(34),r=n.n(a),s=n(18),i=n(17),o=n(2),u=n.n(o),l=n(5),h=n(14),d=n(11),j=n(3),m=n(12),p=n.n(m),b="https://gutematch.herokuapp.com",f={getAllMatchs:function(){return p.a.get("".concat(b,"/all_matchs")).then((function(t){return t.data}))},getOpenMatchs:function(t){return p.a.get("".concat(b,"/open_matchs/").concat(t)).then((function(t){return t.data}))},getMyMatchs:function(t){return p.a.get("".concat(b,"/my_matchs/").concat(t)).then((function(t){return t.data}))},createMatch:function(t,e){return p.a.post("".concat(b,"/add_match/").concat(e),t).then((function(t){return t.data}))},deleteMatch:function(t,e){var n={id_match:t};return p.a.delete("".concat(b,"/my_matchs/owner/").concat(e),{data:n}).then((function(t){return t.data}))},joinMatch:function(t,e){var n={id_match:t};return p.a.post("".concat(b,"/open_matchs/").concat(e),n).then((function(t){return t.data}))},leaveMatch:function(t,e){var n={id_match:t};return p.a.delete("".concat(b,"/my_matchs/").concat(e),{data:n}).then((function(t){return t.data}))}},O={logIn_signUp:function(t,e){var n={name:e};return p.a.post("".concat("https://gutematch.herokuapp.com","/config/").concat(t),n).then((function(t){return t.data}))}},x=n(10),v=n(0),g=n(32),w=n(65),y=n(66);g.extend(w),g.extend(y);var M=function(t){var e,n,c=t.user,a=t.match,r=t.source,s=t.joinMatch,i=t.leaveMatch,o=t.deleteMatch,u=a.name,l=a.date,h=a.location,d=a.players,j=a.players_field,m=a.id_admin;return e="showOpenMatchs"===r?Object(v.jsx)("button",{onClick:s,children:"Join"}):"showMyMatchs"===r?Object(v.jsx)("button",{onClick:i,children:"Leave"}):void 0,m===Number(c)&&(n=Object(v.jsx)("button",{onClick:o,children:"Del"})),Object(v.jsxs)("div",{id:"".concat(r),className:"match-container",children:[Object(v.jsxs)("div",{className:"date",children:[Object(v.jsx)("div",{className:"day",children:g(l).utc().format("DD \u2014 dddd")}),Object(v.jsx)("div",{className:"month-year",children:g(l).utc().format(", MMMM. YYYY")})]}),Object(v.jsxs)("div",{className:"match",children:[Object(v.jsx)("div",{className:"time",children:g(l).utc().format("HH:mm")}),Object(v.jsxs)("div",{className:"players",children:[Object(v.jsxs)("div",{className:"field",children:["F",j/2]}),Object(v.jsx)("div",{className:"joined",children:d}),Object(v.jsx)("div",{className:"missed",children:"/ ".concat(j)})]}),Object(v.jsxs)("div",{className:"action",children:[n," ",e]})]}),Object(v.jsxs)("div",{className:"info",children:[Object(v.jsx)("div",{className:"name",children:u}),Object(v.jsx)("div",{className:"location",children:h})]})]})};var N=function(t){var e=t.props,n=e.user,c=e.source,a=e.matchs,r=e.action,s=function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.joinMatch(e,n).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.leaveMatch(e,n).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.deleteMatch(e,n).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)("div",{children:[a.map((function(t,e){return Object(v.jsx)(M,{match:t,user:n,source:c,joinMatch:function(){return s(t.id_match)},leaveMatch:function(){return i(t.id_match)},deleteMatch:function(){return o(t.id_match)}},e)})),Object(v.jsx)("div",{className:"bottom-space"})]})},_=function(t){var e=t.msg;if(e){var n=e;return Object(v.jsx)("div",{className:"message",children:Object(v.jsx)("div",{children:n})})}return null},k=function(){var t=Object(x.b)().loginWithRedirect;return Object(v.jsx)("button",{className:"action-button primary",onClick:function(){return t()},children:"Log In"})},C=function(){var t=Object(x.b)().logout;return Object(v.jsx)("button",{className:"action-button logout-button secondary",onClick:function(){return localStorage.removeItem("player_id"),localStorage.removeItem("player_name"),void t({returnTo:window.location.origin})},children:"Log Out"})},I=function(){var t=Object(x.b)().isAuthenticated;return localStorage.getItem("player_id")||t?Object(v.jsx)(C,{}):Object(v.jsx)(k,{})},A=function(t){var e=t.playerName,n=function(){return e?Object(v.jsx)("div",{children:e}):null};return Object(v.jsx)("div",{className:"config",children:Object(v.jsxs)("div",{className:"profile",children:[Object(v.jsx)(n,{}),Object(v.jsx)(I,{})]})})},S={settingsIcon:n.p+"static/media/settings.5ce75b92.svg",openMatchsIcon:n.p+"static/media/open_matchs.da3387c7.svg",myMatchsIcon:n.p+"static/media/my_matchs.feae84d8.svg",createMatchIcon:n.p+"static/media/create.62809c1e.svg"},Y=(n(67),n(32));var D=function(){var t=localStorage.getItem("player_id"),e=localStorage.getItem("player_name"),n=Object(x.b)(),a=n.user,r=n.isLoading,o=a?a.sub:void 0,m=Object(c.useState)(Number(t)||0),p=Object(h.a)(m,2),b=p[0],g=p[1],w=Object(c.useState)([]),y=Object(h.a)(w,2),M=y[0],k=y[1],C=Object(c.useState)(""),I=Object(h.a)(C,2),D=I[0],F=I[1];Object(c.useEffect)((function(){var t=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getAllMatchs().then((function(t){T("showAllMatchs"),k(t),W("All matchs")}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getOpenMatchs(b).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T("showOpenMatchs"),W("Open matchs"),t.next=4,e;case 4:if(t.t0=typeof t.sent,"object"!==t.t0){t.next=9;break}k(e),t.next=10;break;case 9:k([]);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(n){0!==n?"/"===window.location.pathname||"/open_matchs"===window.location.pathname?e():"/my_matchs"===window.location.pathname?B():"/add_match"===window.location.pathname?G():z():t()};r||(a?O.logIn_signUp(o,a.name).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g,t.next=3,e[0].id;case 3:return t.t1=t.sent,(0,t.t0)(t.t1),t.t2=localStorage,t.next=8,e[0].id;case 8:return t.t3=t.sent,t.t2.setItem.call(t.t2,"player_id",t.t3),t.t4=localStorage,t.next=13,e[0].name;case 13:return t.t5=t.sent,t.t4.setItem.call(t.t4,"player_name",t.t5),t.t6=n,t.next=18,e[0].id;case 18:t.t7=t.sent,(0,t.t6)(t.t7);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):n(b))}),[r,a,o,b]);var L=Object(c.useState)(""),R=Object(h.a)(L,2),q=R[0],T=R[1],H=Object(c.useState)(""),U=Object(h.a)(H,2),J=U[0],W=U[1],E=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getAllMatchs().then((function(t){T("showAllMatchs"),k(t),W("All matchs")}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.getOpenMatchs(b).then((function(t){T("showOpenMatchs"),W("Open matchs"),"object"===typeof t?k(t):(k([]),F(t))}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.getMyMatchs(b).then((function(e){T("showMyMatchs"),W("My matchs"),"object"===typeof e?k(e):(k([]),F(t?e:"You must be loged to join a match"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){k([]),T("showCreateMatchForm"),W("Create a match"),F(t?"":"You must be loged to create a match")},z=function(){T("config"),W("Config")},P=Object(c.useState)({date:"",time:"",location:"",players_field:10,name:""}),Q=Object(h.a)(P,2),V=Q[0],X=Q[1],Z=function(t){X(Object(i.a)(Object(i.a)({},V),{},Object(s.a)({},t.target.name,t.target.value)))},$=function(){var t=Object(l.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n={date:"".concat(V.date," ").concat(V.time),location:V.location,players_field:Number(V.players_field),name:V.name},t.next=4,f.createMatch(n,b).then(function(){var t=Object(l.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=F,t.next=3,e;case 3:t.t1=t.sent,(0,t.t0)(t.t1),"Match created"===e&&F(e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tt={matchs:M,user:b,source:q,action:function(){return B()}};return Object(v.jsx)(d.a,{children:Object(v.jsxs)("div",{className:"body-app",children:[Object(v.jsx)("div",{className:"body-app-background"}),Object(v.jsxs)("div",{className:"header",children:[Object(v.jsxs)("div",{className:"topbar",children:[Object(v.jsxs)("div",{className:"logo",children:["gute",Object(v.jsx)("span",{children:"match"})]}),Object(v.jsx)(d.b,{to:"/config",className:"".concat("config"===q?"none":"config-button"),onClick:function(){return z()},children:Object(v.jsx)("img",{src:S.settingsIcon,alt:"settings",className:"settings-icon",width:"20",height:"20"})})]}),Object(v.jsxs)("div",{className:"title",children:[J,"showOpenMatchs"===q&&M.length>0||"showMyMatchs"===q||"showAllMatchs"===q?" \u2014 ".concat(M.length):""]}),Object(v.jsx)("div",{className:"message-container",children:Object(v.jsx)(_,{msg:D,action:void(D&&setTimeout((function(){F("")}),8e3))})})]}),Object(v.jsx)("div",{className:"main",children:Object(v.jsxs)(j.c,{children:[Object(v.jsx)(j.a,{exact:!0,path:"/",children:Object(v.jsx)(N,{props:tt})}),Object(v.jsx)(j.a,{path:"/all_matchs",children:Object(v.jsx)(N,{props:tt})}),Object(v.jsx)(j.a,{path:"/open_matchs",children:Object(v.jsx)(N,{props:tt})}),Object(v.jsx)(j.a,{exact:!0,path:"/my_matchs/",children:Object(v.jsx)(N,{props:tt})}),Object(v.jsx)(j.a,{path:"/add_match",children:Object(v.jsx)("div",{children:"showCreateMatchForm"===q?Object(v.jsxs)("form",{onSubmit:$,onReset:function(){X(Object(i.a)(Object(i.a)({},V),{},{date:"",time:"",location:"",players_field:10,name:""}))},className:"create-match-form",children:[Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Location"}),Object(v.jsx)("input",{className:"input-adress",required:!0,placeholder:"Adress",name:"location",value:V.location,onChange:Z}),Object(v.jsx)("label",{children:"Adress 1234, City, Country"})]}),Object(v.jsxs)("div",{className:"name-field",children:[Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Field"}),Object(v.jsx)("div",{children:Object(v.jsxs)("select",{className:"drop-players-field",name:"players_field",type:"number",value:V.players_field,onChange:Z,children:[Object(v.jsx)("option",{value:"10",children:"F \u2014 5"}),Object(v.jsx)("option",{value:"14",children:"F \u2014 7"}),Object(v.jsx)("option",{value:"18",children:"F \u2014 9"}),Object(v.jsx)("option",{value:"22",children:"F \u2014 11"})]})})]}),Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Name"}),Object(v.jsx)("input",{className:"input-name",required:!0,placeholder:"Match name",maxLength:"10",name:"name",value:V.name,onChange:Z})]})]}),Object(v.jsxs)("div",{className:"date-field",children:[Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Date"}),Object(v.jsx)("input",{required:!0,className:"input-date",type:"date",name:"date",min:Y().format("YYYY-MM-DD"),max:Y().add(3,"M").format("YYYY-MM-DD"),value:V.date,onChange:Z})]}),Object(v.jsxs)("fieldset",{children:[Object(v.jsx)("legend",{children:"Time"}),Object(v.jsx)("input",{required:!0,className:"input-time",type:"time",name:"time",value:V.time,onChange:Z})]})]}),Object(v.jsxs)("div",{className:"action",children:[Object(v.jsx)("button",{type:"reset",value:"Reset",children:"Reset"}),Object(v.jsx)("button",{type:"submit",children:"Create"})]})]}):null})}),Object(v.jsx)(j.a,{path:"/config",children:Object(v.jsx)(A,{playerName:e})})]})}),Object(v.jsxs)("div",{className:"navbar",children:[0===b?Object(v.jsx)(d.b,{to:"/all_matchs",onClick:function(){return E()},children:Object(v.jsx)("img",{src:S.openMatchsIcon,alt:"All Matchs",className:"".concat("showAllMatchs"===q?"focus":"nav-icon"),width:"16",height:"16"})}):Object(v.jsx)(d.b,{to:"/open_matchs",onClick:function(){return K()},children:Object(v.jsx)("img",{src:S.openMatchsIcon,alt:"Open Matchs",className:"".concat("showOpenMatchs"===q?"focus":"nav-icon"),width:"16",height:"16"})}),Object(v.jsx)(d.b,{to:"/add_match",onClick:function(){return G()},children:Object(v.jsx)("img",{src:S.createMatchIcon,alt:"Create Match",className:"".concat("showCreateMatchForm"===q?"focus":"nav-icon"),width:"16",height:"16"})}),Object(v.jsx)(d.b,{to:"/my_matchs",onClick:function(){return B()},children:Object(v.jsx)("img",{src:S.myMatchsIcon,alt:"My Matchs",className:"".concat("showMyMatchs"===q?"focus":"nav-icon"),width:"16",height:"16"})})]})]})})},F=function(t){var e=t.children,n=Object(j.f)();return Object(v.jsx)(x.a,{domain:"guten.us.auth0.com",clientId:"9KgqHeGFIRxSvwUD75TAWC573AHlg9WK",redirectUri:window.location.origin,onRedirectCallback:function(t){n.push((null===t||void 0===t?void 0:t.returnTo)||window.location.pathname)},children:e})};n(72);r.a.render(Object(v.jsx)(d.a,{children:Object(v.jsx)(F,{children:Object(v.jsx)("div",{className:"app",children:Object(v.jsx)(D,{})})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.0c1d01ee.chunk.js.map